{{ $imageBreakpoints := slice "576" "768" "992" "1200" "1600" "1920" }} {{ "<!-- Collage -->"
| safeHTML }}
<section id="collage" class="bg-white">
  <div class="container-fluid content-space-1">
    <div class="text-center mx-md-auto mb-5">
      <h2 class="display-6">{{- .heading -}}</h2>
    </div>
    <div class="row">
      {{ range $key, $value := .sections }}
      <div class="col-sm-6 col-lg-4 p-2">
      {{ $cloudinary_base_url := replaceRE "(^https?://res.cloudinary.com/andersonscreekps/image/upload/).*" "$1" $value.image }}
      {{ $snapshot_image_path := replaceRE "^https?://res.cloudinary.com/andersonscreekps/image/upload/(.*)" "/$1" $value.image }}
        <a href="{{ $value.image }}">
          <img
            class="img-fluid rounded border border-2 shadow-sm p-1"
            width="3"
            height="2"
            srcset="
          {{- range $i, $e := $imageBreakpoints -}}
          {{- if $i -}}, {{ end -}}
          {{ $cloudinary_base_url }}{{ $.image_transforms }},w_{{ . }}{{ $snapshot_image_path }} {{ . }}w
          {{- end }}"
            sizes="(min-width: 992px) 33.33vw, (min-width: 576px) 50vw, 100vw"
            src="{{ $cloudinary_base_url }}{{ $.image_transforms }},w_600{{ $snapshot_image_path }}"
            alt="{{ .title }}"
            loading="lazy"
        /></a>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ "<!-- End Collage -->" | safeHTML }}
